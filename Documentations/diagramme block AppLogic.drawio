<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0" version="28.2.7">
  <diagram name="Page-1" id="1XW1zt5_X4CrFJu9i16j">
    <mxGraphModel dx="3147" dy="1853" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2362" pageHeight="236" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-13" target="xVeRdJq6uV-X5lp0rZYh-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-15" target="xVeRdJq6uV-X5lp0rZYh-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-15" value="qTelem&amp;nbsp;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Queue&amp;lt;telem_t&amp;gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="378" y="366" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-26" target="xVeRdJq6uV-X5lp0rZYh-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-26" target="xVeRdJq6uV-X5lp0rZYh-58">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;startArrow=classic;startFill=1;fillColor=#e51400;strokeColor=#B20000;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-26" target="xVeRdJq6uV-X5lp0rZYh-72">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="198" y="91" />
              <mxPoint x="2009" y="91" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-26" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;task_acq&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle : Acquerir&amp;nbsp;capteurs (T/H I²C, T_mcu, Vin, porte)&lt;/li&gt;&lt;li&gt;IN : driver sensor_th, adc_utils&lt;/li&gt;&lt;li&gt;OUT : qtelem&lt;/li&gt;&lt;li&gt;Periode : 1Hz + réveil immédiat si demande&lt;/li&gt;&lt;li&gt;API :&amp;nbsp;TaskAcq_Start(qTelem), TaskAcq_RequestImmediateSample()&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="78" y="316" width="250" height="160" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#e51400;strokeColor=#B20000;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-29" target="xVeRdJq6uV-X5lp0rZYh-57">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1190" y="396" />
              <mxPoint x="1190" y="429" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-29" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;task_proc&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle :&amp;nbsp;traitement/hystérésis/alarme (dwell), mise à jour flags, actions.&lt;/li&gt;&lt;li&gt;IN : qTelem&lt;/li&gt;&lt;li&gt;OUT : qEvent, push Logger_Push()&lt;/li&gt;&lt;li&gt;Action : Relay_SetState(), MAJ evtSys, Logger_Flush() si commit&lt;/li&gt;&lt;li&gt;Etats : RUN / DEGRADED / SAFE&lt;/li&gt;&lt;li&gt;API :&amp;nbsp;TaskProc_Start(qTelem, qEvents, evtSys), TaskProc_ForceReeval(), TaskProc_GetLast()&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="548" y="301" width="260" height="190" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-34" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;can_proto&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle :&amp;nbsp;Sérialisation et désérialisation des trames CAN (télémétrie, alarmes, configuration).&lt;/li&gt;&lt;li&gt;IN : telem_t, event_t, trames CAN brutes&lt;/li&gt;&lt;li&gt;OUT : Payload CAN, commandes décodés&lt;/li&gt;&lt;li&gt;Action : mapping telem_t -&amp;gt; frames, vérif d&#39;intégrité (CRC, longueurs)&lt;/li&gt;&lt;li&gt;API : CanProto_BuildTelemetry(),&amp;nbsp;&lt;br&gt;CanProto_BuildAlarm(),&amp;nbsp;&lt;br&gt;CanProto_ParseCommand()&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1314" y="550" width="310" height="170" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.377;entryY=-0.014;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-29" target="xVeRdJq6uV-X5lp0rZYh-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-56" value="AppLogic" style="swimlane;whiteSpace=wrap;labelBorderColor=light-dark(#000000,#0008FF);labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="48" y="31" width="1190" height="899" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-58" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;task_blink&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle : indique états LED/buzzer selon evt_Sys&lt;/li&gt;&lt;li&gt;IN : evtSys&lt;/li&gt;&lt;li&gt;OUT : LED (GPIO), buzzer PWM (TIM4_CH1).&lt;/li&gt;&lt;li&gt;API :&amp;nbsp;TaskBlink_Start(evtSys), TaskBlink_ForcePattern(period_ms)&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="30" y="530" width="250" height="160" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-37" value="Logger" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="732.5" y="580" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-36" value="Relay" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="622.5" y="580" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-25" value="evtSys&amp;nbsp;EventGroup :&lt;br&gt;ALARM&amp;nbsp; |&amp;nbsp; SENSOR_FAULT&amp;nbsp; |&amp;nbsp; DOOR_OPEN&amp;nbsp; | COMMIT" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="500" y="490" width="345" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.483;entryY=1.017;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=classic;startFill=1;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-36" target="xVeRdJq6uV-X5lp0rZYh-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.807;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=classic;startFill=1;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-37" target="xVeRdJq6uV-X5lp0rZYh-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-35" value="GPIO" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="512.5" y="580" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.164;entryY=1.033;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=classic;startFill=1;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-35" target="xVeRdJq6uV-X5lp0rZYh-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-58" target="xVeRdJq6uV-X5lp0rZYh-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-16" value="qEvent&lt;div&gt;Queue&amp;lt;event_t&amp;gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="990" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-30" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;task_can&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle : télémétrie périodique, RX commandes/diag&lt;/li&gt;&lt;li&gt;IN : qEvent, evtSys, accès TaskProc_GetLast()&lt;/li&gt;&lt;li&gt;OUT : trames via &lt;code data-end=&quot;1405&quot; data-start=&quot;1394&quot;&gt;can_proto&lt;/code&gt; (TX/RX)&lt;/li&gt;&lt;li&gt;Action : peut modifier config (cfg_store) et agir sur&amp;nbsp;TaskProc_ForceReeval()&lt;/li&gt;&lt;li&gt;API :&amp;nbsp;TaskCan_Start(qEvents, evtSys)&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="930" y="663" width="240" height="184.5" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-31" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;task_cli&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle : console UART&lt;/li&gt;&lt;li&gt;IN : cli_uart (parsing),&amp;nbsp;TaskProc_GetLast()&lt;/li&gt;&lt;li&gt;OUT : affichage UART&lt;/li&gt;&lt;li&gt;Action : peut modifier config (cfg_store) et agir sur&amp;nbsp;TaskProc_ForceReeval(),&amp;nbsp;&lt;br&gt;TaskAcq_RequestImmediateSample()&lt;br&gt;&lt;/li&gt;&lt;li&gt;API : &lt;code data-end=&quot;1831&quot; data-start=&quot;1814&quot;&gt;TaskCli_Start()&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="670" y="663" width="250" height="167" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-33" target="xVeRdJq6uV-X5lp0rZYh-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-33" value="&lt;span style=&quot;text-align: left;&quot;&gt;cli_uart&amp;nbsp;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="500" y="716.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-13" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;core_init&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Rôle : crée/possède les objets RTOS et lance les tâches.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;RTOS : qTelem , qEvents, evtSys, tCommit&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;API : Core_Init(), Core_Start(), getters (Core_Get*).&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="540" y="84" width="180" height="160" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-13" target="xVeRdJq6uV-X5lp0rZYh-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.911;entryY=-0.017;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-13" target="xVeRdJq6uV-X5lp0rZYh-25">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="800" y="120" as="sourcePoint" />
            <mxPoint x="1105" y="335" as="targetPoint" />
            <Array as="points">
              <mxPoint x="814" y="164" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" target="xVeRdJq6uV-X5lp0rZYh-16">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="759.95" y="300" as="sourcePoint" />
            <mxPoint x="909.95" y="170" as="targetPoint" />
            <Array as="points">
              <mxPoint x="880" y="300" />
              <mxPoint x="880" y="300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-118" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-16" target="xVeRdJq6uV-X5lp0rZYh-30">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1050" y="419" />
              <mxPoint x="1050" y="419" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-130" value="s_last: telem_t" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="920" y="450" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.366;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-29" target="xVeRdJq6uV-X5lp0rZYh-30">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="940" y="410" as="sourcePoint" />
            <mxPoint x="1050" y="660" as="targetPoint" />
            <Array as="points">
              <mxPoint x="910" y="300" />
              <mxPoint x="910" y="480" />
              <mxPoint x="1030" y="480" />
              <mxPoint x="1030" y="660" />
              <mxPoint x="1031" y="660" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-132" value="CAN" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-56">
          <mxGeometry x="1072" y="570" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-133" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.792;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;endArrow=classic;endFill=1;startArrow=classic;startFill=1;" edge="1" parent="xVeRdJq6uV-X5lp0rZYh-56" source="xVeRdJq6uV-X5lp0rZYh-132" target="xVeRdJq6uV-X5lp0rZYh-30">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1126" y="660" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1120" y="649" />
              <mxPoint x="1120" y="649" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-57" target="xVeRdJq6uV-X5lp0rZYh-66">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-57" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;b&gt;logger&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle : Ring buffer RAM de télémétrie + commit périodique vers FRAM SPI&lt;/li&gt;&lt;li&gt;IN :&amp;nbsp;Logger_Push(),&amp;nbsp;&lt;br&gt;EVT_SYS_COMMIT_REQ&lt;/li&gt;&lt;li&gt;OUT : frame_spi (stockage)&lt;/li&gt;&lt;li&gt;Action : FIFO RAM, Push()/Flush()&lt;/li&gt;&lt;li&gt;API : Logger_Init(), Logger_Push(const telem_t* sample),&amp;nbsp;Logger_Flush(),&amp;nbsp;Logger_Clear(),&amp;nbsp;&lt;br&gt;Logger_GetCount()&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1314" y="344" width="310" height="170" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-144" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-66" target="xVeRdJq6uV-X5lp0rZYh-68">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-145" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-66" target="xVeRdJq6uV-X5lp0rZYh-138">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-66" value="Ring Buffer&lt;div&gt;RAM&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1688" y="399" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-68" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;fram_spi&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle : Driver SPI pour FRAM MB85RSxxx (RX/TX)&lt;/li&gt;&lt;li&gt;IN : Buffer, Fram_WriteSample()&lt;/li&gt;&lt;li&gt;OUT : RX/TX SPI&lt;/li&gt;&lt;li&gt;Action : Gestion CS, adresse de log&lt;/li&gt;&lt;li&gt;API : Fram_Init, Fram_Read(), Frame_Write(), Fram_LogClear()&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1868" y="354" width="280" height="150" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-72" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;sensor_th&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle :&amp;nbsp;Driver capteur T/H via I2C&lt;/li&gt;&lt;li&gt;IN : Appel task_acq&lt;/li&gt;&lt;li&gt;OUT : float t_c, float rh_pct&lt;/li&gt;&lt;li&gt;Actions : Lecture registre capteur, conversion&amp;nbsp;°C / %HR&lt;/li&gt;&lt;li&gt;API :&amp;nbsp;SensorTH_Init(),&amp;nbsp;SensorTH_Read(),&amp;nbsp;&lt;br&gt;SensorTH_SetAddr&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1868" y="180" width="282" height="160" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-120" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-29" target="xVeRdJq6uV-X5lp0rZYh-31">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="968" y="351" as="sourcePoint" />
            <mxPoint x="1248.05" y="351" as="targetPoint" />
            <Array as="points">
              <mxPoint x="958" y="331" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-131" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#e51400;strokeColor=#B20000;dashed=1;dashPattern=8 8;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-30" target="xVeRdJq6uV-X5lp0rZYh-34">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1218" y="795.97" as="sourcePoint" />
            <mxPoint x="1378" y="795.97" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1280" y="790" />
              <mxPoint x="1280" y="630" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-135" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;cli_uart&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle :&amp;nbsp;Middleware CLI texte sur UART&lt;/li&gt;&lt;li&gt;IN :&amp;nbsp;Caractères UART&lt;/li&gt;&lt;li&gt;OUT :&amp;nbsp;Chaînes texte vers UART Tx,&amp;nbsp;callbacks/hook vers AppLogic&lt;/li&gt;&lt;li&gt;Action :&amp;nbsp;Bufferisation d’entrée,&amp;nbsp;Tokenisation&lt;/li&gt;&lt;li&gt;API :&amp;nbsp;CliUart_Init(),&amp;nbsp;CliUart_OnRxChar(),&amp;nbsp;&lt;br&gt;CliUart_Process(),&amp;nbsp;CliUart_RegisterHandlers()&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1314" y="760" width="306" height="150" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-137" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#e51400;strokeColor=#B20000;dashed=1;dashPattern=8 8;startArrow=classic;startFill=1;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-31" target="xVeRdJq6uV-X5lp0rZYh-135">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="842.9999999999998" y="870.9999999999998" as="sourcePoint" />
            <mxPoint x="1314" y="819.9999999999998" as="targetPoint" />
            <Array as="points">
              <mxPoint x="843" y="900" />
              <mxPoint x="1280" y="900" />
              <mxPoint x="1280" y="840" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-138" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;crc_utils&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle : Fonctions &lt;strong data-end=&quot;4283&quot; data-start=&quot;4269&quot;&gt;CRC8/CRC16&lt;/strong&gt; + helpers (valid)&amp;nbsp;&lt;/li&gt;&lt;li&gt;IN : Pointeur sur buffer, Poly CRC&lt;/li&gt;&lt;li&gt;OUT : Valeur CRC calculée,&amp;nbsp;Résultat bool (valid)&lt;/li&gt;&lt;li&gt;Action :&amp;nbsp;Calcul CRC, Vérification d’intégrité d’un &lt;code data-end=&quot;4626&quot; data-start=&quot;4617&quot;&gt;telem_t&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code data-end=&quot;4626&quot; data-start=&quot;4617&quot;&gt;API :&amp;nbsp;Crc8_Compute(),&amp;nbsp;Crc16_Compute(),&amp;nbsp;&lt;br&gt;Crc8_Check()&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1670" y="550" width="306" height="150" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-140" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;relay&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle : Piloter le &lt;strong data-end=&quot;5034&quot; data-start=&quot;5009&quot;&gt;relais de ventilation&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;IN : Relay_SetState()&amp;nbsp;&lt;/li&gt;&lt;li&gt;OUT : État GPIO sur la sortie relais&lt;/li&gt;&lt;li&gt;Action : Commutation, protection simple (toggle)&lt;/li&gt;&lt;li&gt;API :&amp;nbsp;Relay_Init(),&amp;nbsp;Relay_SetState(),&amp;nbsp;&lt;br&gt;Relay_GetState()&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1314" y="200" width="310" height="130" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-141" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#e51400;strokeColor=#B20000;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="xVeRdJq6uV-X5lp0rZYh-29" target="xVeRdJq6uV-X5lp0rZYh-140">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="800" y="400" as="sourcePoint" />
            <mxPoint x="1306" y="433" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1190" y="396" />
              <mxPoint x="1190" y="265" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-146" value="App — Modules utilitaires &amp;amp; middleware" style="swimlane;whiteSpace=wrap;html=1;labelBackgroundColor=none;labelBorderColor=light-dark(#000000,#FF0000);" vertex="1" parent="1">
          <mxGeometry x="1260" y="31" width="920" height="899" as="geometry" />
        </mxCell>
        <mxCell id="xVeRdJq6uV-X5lp0rZYh-147" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;code data-end=&quot;5557&quot; data-start=&quot;5544&quot;&gt;mock_*.[ch]&lt;/code&gt; (simulation Keil / tests)&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Rôle : Fournir des &lt;strong data-end=&quot;5638&quot; data-start=&quot;5610&quot;&gt;implémentations simulées&lt;/strong&gt; des drivers pour la cible &lt;code data-end=&quot;5677&quot; data-start=&quot;5665&quot;&gt;SIM_TARGET&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code data-end=&quot;5677&quot; data-start=&quot;5665&quot;&gt;IN : Config de simulation&lt;/code&gt;&lt;/li&gt;&lt;li&gt;OUT :&amp;nbsp;Valeurs cohérentes mais simulées, Traces/log pour débogage&lt;/li&gt;&lt;li&gt;API :&amp;nbsp;Mock_SensorTH_SetProfile(),&amp;nbsp;&lt;br&gt;Mock_Adc_SetVin(float vin)...&lt;/li&gt;&lt;/ul&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" vertex="1" parent="xVeRdJq6uV-X5lp0rZYh-146">
          <mxGeometry x="410" y="729" width="306" height="150" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
